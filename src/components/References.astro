---
import "@/styles/global.css";
const refs = [
  {
    slug: "nappali-budapest",
    title: "Nappali | Budapest",
    cover: `${import.meta.env.BASE_URL}uploads/refs/nappali-budapest/1.jpg`,
    images: [
      `${import.meta.env.BASE_URL}uploads/refs/nappali-budapest/1.jpg`,
      `${import.meta.env.BASE_URL}uploads/refs/nappali-budapest/2.jpg`,
      `${import.meta.env.BASE_URL}uploads/refs/nappali-budapest/3.jpg`,
    ],
  },
  {
    slug: "nappali-budapest",
    title: "Nappali | Budapest",
    cover: `${import.meta.env.BASE_URL}uploads/refs/nappali-budapest/1.jpg`,
    images: [
      `${import.meta.env.BASE_URL}uploads/refs/nappali-budapest/1.jpg`,
      `${import.meta.env.BASE_URL}uploads/refs/nappali-budapest/2.jpg`,
      `${import.meta.env.BASE_URL}uploads/refs/nappali-budapest/3.jpg`,
    ],
  },
  {
    slug: "nappali-budapest",
    title: "Nappali | Budapest",
    cover: `${import.meta.env.BASE_URL}uploads/refs/nappali-budapest/1.jpg`,
    images: [
      `${import.meta.env.BASE_URL}uploads/refs/nappali-budapest/1.jpg`,
      `${import.meta.env.BASE_URL}uploads/refs/nappali-budapest/2.jpg`,
      `${import.meta.env.BASE_URL}uploads/refs/nappali-budapest/3.jpg`,
    ],
  },
  
  // … a többi ugyanígy BASE_URL-lel
];
const jsonSafe = JSON.stringify(refs).replace(/</g, '\\u003c'); // prevenció
---
<section id="references" class="refs container">
  <div class="section-sep" aria-hidden="true"></div>
  <h2 class="refs-title">Referenciák</h2>

  <div class="refs-grid">
    {refs.map((r, idx) => (
      <button class="ref-card" data-ref-index={idx} aria-label={`Megnyitás: ${r.title}`}>
        <figure>
          <img src={r.cover} alt={r.title} loading="lazy" />
          <figcaption>{r.title}</figcaption>
        </figure>
      </button>
    ))}
  </div>

  <!-- A JS innen olvassa ki a képlistákat -->
  <script id="refs-data" type="application/json">{jsonSafe}</script>
</section>

<!-- Lightbox -->
<div id="lightbox" class="lightbox" aria-hidden="true" role="dialog" aria-label="Referencia galéria">
  <div class="lb-backdrop" data-lb-close></div>
  <div class="lb-frame">
    <button class="lb-close" data-lb-close aria-label="Bezárás">✕</button>
    <div class="lb-stage">
      <button class="lb-prev" aria-label="Előző">‹</button>
      <img id="lb-image" alt="" />
      <button class="lb-next" aria-label="Következő">›</button>
    </div>
    <div class="lb-meta">
      <span id="lb-title"></span>
      <span id="lb-count"></span>
    </div>
  </div>
</div>

<script type="module">
  import initRefs from "@/scripts/refs.js";
  initRefs();
</script>
